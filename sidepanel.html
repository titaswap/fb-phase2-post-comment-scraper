<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FB Phase-2 Extractor</title>
    <link rel="stylesheet" href="sidepanel.css">
</head>

<body>
    <h2>FB Phase-2 Extractor</h2>

    <div class="control-section">
        <div class="file-input">
            <label for="file">Upload Phase-1 Data (phase1.json):</label>
            <input type="file" id="file" accept=".json" />
        </div>

        <div class="file-input">
            <label for="final-file">Load Existing Final Data (final.json):</label>
            <input type="file" id="final-file" accept=".json" />
        </div>

        <div class="control-group start-index-group">
            <label for="start-index-input">Start from Index</label>
            <div class="input-row">
                <input type="number" id="start-index-input" min="0" placeholder="0" />
                <button id="set-index-btn" class="btn-sm">Set</button>
            </div>
        </div>

        <div class="control-group safe-mode-group">
            <div class="toggle-row">
                <span class="toggle-label">Safe Mode (Slow)</span>
                <label class="switch">
                    <input type="checkbox" id="safe-mode-toggle">
                    <span class="slider round"></span>
                </label>
            </div>
            <div class="toggle-hint">Increases delay to 30s-60s for safety</div>
        </div>

        <div class="button-group">
            <button id="start">‚ñ∂ Start</button>
            <button id="pause">‚è∏ Pause</button>
            <button id="resume">‚ñ∂ Resume</button>
            <button id="stop">‚èπ Stop</button>
            <button id="next">‚è≠ Next</button>
            <button id="reset">üîÑ Reset</button>
            <button id="update-final">üìù Update final.json</button>
        </div>

        <div class="status-section">
            <div id="status">Idle</div>
            <div id="progress">Progress: 0/0</div>
            <div id="countdown">Next in: --</div>
            <div id="errors">Errors: 0</div>
            <div id="final-count">Collected: 0</div>
            <div id="server-status-row">
                <span id="server-url">Target: --</span>
                <span id="server-health" class="offline">‚óè Offline</span>
            </div>
            <div id="auto-save-status" class="status-note">Auto-save: Requires local server (npm start)</div>
        </div>
    </div>

    <div class="log-section">
        <h3>Activity Log</h3>
        <pre id="log"></pre>
    </div>

    <script src="sidepanel.js"></script>
</body>

</html>