<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FB Phase-2 Extractor</title>
    <link rel="stylesheet" href="sidepanel.css">
</head>

<body>


    <div class="control-section">
        <div id="status-banner" class="status-banner">SYSTEM IDLE</div>
        <div class="file-input">
            <label for="file">Upload Phase-1 Data (phase1.json):</label>
            <input type="file" id="file" accept=".json" />
        </div>

        <div class="file-input">
            <label for="final-file">Load Existing Final Data (final.json):</label>
            <input type="file" id="final-file" accept=".json" />
        </div>

        <div class="control-group start-index-group">
            <label for="start-index-input">Start from Index</label>
            <div class="input-row">
                <input type="number" id="start-index-input" min="0" placeholder="0" />
                <button id="set-index-btn" class="btn-sm">Set</button>
            </div>
        </div>

        <div class="control-group delay-group" style="margin-bottom: 15px;">
            <label>Random Delay (seconds)</label>
            <div class="input-row" style="display: flex; gap: 10px; align-items: center;">
                <input type="number" id="min-delay" min="1" max="300" placeholder="Min" style="width: 50%" />
                <span>-</span>
                <input type="number" id="max-delay" min="1" max="300" placeholder="Max" style="width: 50%" />
            </div>
        </div>



        <div class="button-group">
            <button id="start">‚ñ∂ Start</button>
            <button id="pause">‚è∏ Pause</button>
            <button id="resume">‚ñ∂ Resume</button>
            <button id="stop">‚èπ Stop</button>
            <button id="previous">‚èÆ Prev</button>
            <button id="next">‚è≠ Next</button>
            <button id="reset">üîÑ Reset</button>
        </div>

        <div class="status-section">
            <div id="countdown">Ready to Start</div>
            <div id="status">Idle</div>
            <!-- Old simple text progress hidden via CSS -->
            <div id="progress">Progress: 0/0</div>
            <div id="timeout-countdown" style="font-size: 10px; color: #94a3b8; margin-bottom: 5px; height: 12px;">
            </div>


            <!-- New Sexy Progress Bar -->
            <div class="progress-container">
                <div class="progress-label">
                    <span class="progress-text">Progress</span>
                    <span class="progress-percent" id="progress-percent-text">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" id="progress-fill"></div>
                </div>
                <div style="font-size: 11px; margin-top: 4px; color: #94a3b8; text-align: right;">
                    <span id="progress-fraction">0 / 0</span>
                </div>
            </div>

            <div id="errors">Errors: 0</div>
            <div id="final-count">Collected: 0</div>
            <div id="server-status-row">
                <span id="server-url">Target: --</span>
                <span id="server-health" class="offline">‚óè Offline</span>
            </div>
            <div id="auto-save-status" class="status-note">Auto-save: Requires local server (npm start)</div>
        </div>
    </div>

    <div class="log-section">
        <h3>Activity Log</h3>
        <pre id="log"></pre>
    </div>

    <script type="module" src="src/sidepanel/main.js"></script>
</body>

</html>